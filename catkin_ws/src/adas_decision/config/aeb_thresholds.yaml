# AEB FSM Thresholds Configuration
# AEB状态机阈值配置

# TTC Thresholds (seconds) - 调整后的介入等级
ttc_inactive: 3.0    # TTC > 3.0s -> INACTIVE
ttc_warning: 1.5     # 1.5s <= TTC < 3.0s -> WARNING (FCW)
ttc_partial: 1.0     # 1.0s <= TTC < 1.5s -> PARTIAL_BRAKE
# TTC < 1.0s -> FULL_BRAKE

# Deceleration Commands (m/s²)
decel_partial_min: 4.0   # Minimum decel in PARTIAL_BRAKE
decel_partial_max: 7.0   # Maximum decel in PARTIAL_BRAKE  
decel_full: 1.0          # FULL_BRAKE: brake=1.0 (踩死，不考虑加速度)

# TTC Calculator Parameters
min_ttc: 0.1         # Minimum TTC to report (seconds)
max_ttc: 10.0        # Maximum TTC to consider (seconds)
safety_margin: 1.5   # Additional safety distance (meters)

# 行驶走廊参数 - 只检测行驶路径上的障碍物
ego_width: 2.0             # 车宽 (meters)
lane_margin: 1.5           # 车道边缘余量 (meters) - 放宽到1.5m
# corridor_half_width = ego_width/2 + lane_margin = 2.5m

# 转弯处理参数 (Turning Detection)
turning_enabled: true              # 启用转弯检测
yaw_rate_threshold: 0.05           # 偏航角速度阈值 (rad/s) - 超过此值认为在转弯
turning_corridor_expansion: 0.5    # 转弯时走廊额外扩展 (meters)
curve_lookahead: 2.0               # 曲线预瞄时间 (seconds)

# 标志牌/路灯杆过滤 (Sign/Pole Filter)
sign_filter_enabled: false         # 禁用标志牌过滤 - 避免误过滤
sign_width_threshold: 0.8          # 宽度阈值 (meters) - 小于此值视为杆状物
sign_height_ratio: 2.0             # 高度/宽度比阈值 - 大于此值视为杆状物
sign_min_ground_clearance: 1.0     # 最小离地间隙 (meters) - 底部高于此值视为悬空物体

# 鬼探头检测参数 (Lateral Intrusion Detection)
lateral_intrusion_enabled: true    # 启用侧向入侵检测
lateral_detection_width: 4.0       # 侧向检测范围 (meters)
lateral_velocity_threshold: 0.5    # 横向速度阈值 (m/s) - 超过此速度才认为在侵入
intrusion_ttc_threshold: 2.0       # 预计进入车道的时间阈值 (seconds)

# Stability filtering
min_ego_velocity: 0.1          # m/s - 几乎静止也计算TTC
stable_frames_required: 1      # 只需要1帧即可检测

# State confirmation
state_confirm_count: 2         # 需要连续2帧确认才切换状态

# Heartbeat
heartbeat_rate: 40.0  # Hz (25ms period)
