# AEB FSM Thresholds Configuration
# AEB状态机阈值配置

# TTC Thresholds (seconds) - 调整后的介入等级
ttc_inactive: 3.0    # TTC > 3.0s -> INACTIVE
ttc_warning: 1.5     # 1.5s <= TTC < 3.0s -> WARNING (FCW)
ttc_partial: 1.0     # 1.0s <= TTC < 1.5s -> PARTIAL_BRAKE
# TTC < 1.0s -> FULL_BRAKE

# Deceleration Commands (m/s²)
decel_partial_min: 4.0   # Minimum decel in PARTIAL_BRAKE
decel_partial_max: 7.0   # Maximum decel in PARTIAL_BRAKE  
decel_full: 1.0          # FULL_BRAKE: brake=1.0 (踩死，不考虑加速度)

# TTC Calculator Parameters
min_ttc: 0.1         # Minimum TTC to report (seconds)
max_ttc: 10.0        # Maximum TTC to consider (seconds)
safety_margin: 1.5   # Additional safety distance (meters)

# Path-based corridor detection (vehicle width auto-detected from CARLA)
lane_margin: 0.2     # Added to auto-detected vehicle width (meters)

# Path prediction parameters
path_points: 20              # Number of points in predicted path
path_max_distance: 50.0      # Maximum prediction distance (meters)

# Suspended object filter
sign_filter_enabled: false         # Disable to avoid false filtering
sign_min_ground_clearance: 1.0     # Objects with bottom > 1m above ground are filtered

# Lateral intrusion detection (ghost pedestrian)
lateral_intrusion_enabled: true    # Enable lateral intrusion detection
lateral_detection_width: 3.0       # Base lateral detection range (meters)
lateral_velocity_threshold: 0.5    # Min lateral velocity to consider intrusion (m/s)
intrusion_ttc_threshold: 2.0       # Max time to corridor entry (seconds)

# Stability filtering
min_ego_velocity: 0.1          # m/s - 几乎静止也计算TTC
stable_frames_required: 1      # 只需要1帧即可检测

# State confirmation
state_confirm_count: 2         # 需要连续2帧确认才切换状态

# Heartbeat
heartbeat_rate: 40.0  # Hz (25ms period)
